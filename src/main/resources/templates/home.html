<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Player Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/search.css}">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script type="text/javascript" th:src="@{/js/toastmessage.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>
<body>
<!--<h1 style="text-align: center; margin-bottom: 10px;">Đội hình của bạn</h1>-->
<div class="search">
<form th:action="@{/player/search-player}"
      method="post" th:object="${searchPlayer}" id="header-search-people" class="form-area" novalidate="novalidate" autocomplete="off">
    <div class="row">
        <div class="col-md-10">
            <div class="styled-input wide multi">
                <div class="first-name" id="input-first-name">
                    <input th:field="*{nameLike}" type="text" name="fn" id="fn" autocomplete="off" data-placeholder-focus="false" required />
                    <label>Tìm theo tên</label>
                    <svg class="icon--check" width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                            <g id="UI-Elements-Forms" transform="translate(-255.000000, -746.000000)" fill-rule="nonzero" stroke="#81B44C" stroke-width="3">
                                <polyline id="Path-2" points="257 754.064225 263.505943 760.733489 273.634603 748"></polyline>
                            </g>
                        </g>
                    </svg>
                    <svg class="icon--error" width="15px" height="15px" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                            <g id="UI-Elements-Forms" transform="translate(-550.000000, -747.000000)" fill-rule="nonzero" stroke="#D0021B" stroke-width="3">
                                <g id="Group" transform="translate(552.000000, 749.000000)">
                                    <path d="M0,11.1298982 L11.1298982,-5.68434189e-14" id="Path-2-Copy"></path>
                                    <path d="M0,11.1298982 L11.1298982,-5.68434189e-14" id="Path-2-Copy-2" transform="translate(5.564949, 5.564949) scale(-1, 1) translate(-5.564949, -5.564949) "></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
                <div class="state" >
                    <select name="state" th:field="*{countryId}" class="selectpicker" data-live-search="true" placeholder="Quốc tịch">
                        <option th:value="null">Chọn quốc tịch</option>
                        <option th:each="c: ${countries}" th:value="${c.id}" th:text="${c.name}"></option>
                    </select>
<!--                    <label>Quốc tịch</label>-->
<!--                    <svg class="chevron-down" width="17px" height="10px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg"-->
<!--                         xmlns:xlink="http://www.w3.org/1999/xlink">-->
<!--                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">-->
<!--                            <g id="UI-Elements-Forms" transform="translate(-840.000000, -753.000000)" stroke="#4A4A4A" stroke-width="0.9">-->
<!--                                <g id="Done-Copy-2" transform="translate(622.000000, 727.000000)">-->
<!--                                    <polyline id="Rectangle-16" transform="translate(226.400000, 27.400000) rotate(-45.000000) translate(-226.400000, -27.400000) "-->
<!--                                              points="231.8 32.8 221 32.8 221 22"></polyline>-->
<!--                                </g>-->
<!--                            </g>-->
<!--                        </g>-->
<!--                    </svg>-->
                </div>
                <div class="state">
                    <select name="state" th:field="*{positionDetailId}" class="selectpicker" data-live-search="true" placeholder="Chọn vị trí">
                        <option th:value="null">Chọn vị trí</option>
                        <option th:each="c: ${positionDetails}" th:value="${c.id}" th:text="${c.code}"></option>
                    </select>
<!--                    <label>Vị trí</label>-->
<!--                    <svg class="chevron-down" width="17px" height="10px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg"-->
<!--                         xmlns:xlink="http://www.w3.org/1999/xlink">-->
<!--                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">-->
<!--                            <g id="UI-Elements-Forms" transform="translate(-840.000000, -753.000000)" stroke="#4A4A4A" stroke-width="0.9">-->
<!--                                <g id="Done-Copy-2" transform="translate(622.000000, 727.000000)">-->
<!--                                    <polyline id="Rectangle-16" transform="translate(226.400000, 27.400000) rotate(-45.000000) translate(-226.400000, -27.400000) "-->
<!--                                              points="231.8 32.8 221 32.8 221 22"></polyline>-->
<!--                                </g>-->
<!--                            </g>-->
<!--                        </g>-->
<!--                    </svg>-->
                </div>
            </div>
        </div>
        <div class="col-md-2 no-pad-left-10">
            <button type="submit" class="primary-btn serach-btn" id="submit_btn">Tìm kiếm</button>
        </div>
    </div>
</form>
</div>
<!--form search-->
<div style="text-align: center; margin-bottom: 10px;">
    <a href="/player/buy-player" class="btn btn-success">Tuyển thêm cầu thủ</a>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Xem ngân sách CLB hiện tại
    </button>
</div>
<div class="table1">
<table th:if="${players.size() > 0}" cellpadding="0" cellspacing="10" class="table table-striped">
    <tr>
        <th>Id cầu thủ</th>
        <th>Tên cầu thủ</th>
        <th>Vị trí</th>
        <th>Vị trí chi tiết</th>
        <th>Lương</th>
        <th>Giá trị chuyển nhượng</th>
        <th>Quốc tịch</th>
        <th style="width: 120px">Ngày sinh</th>
        <th>Kỹ năng</th>
        <th>Số áo</th>
        <th>Tình trạng sức khỏe</th>
        <th>Thời gian gia nhập</th>
        <th>Avatar</th>
        <th colspan="2">Hành động</th>
    </tr>
    <tr th:each="p : ${players}">
        <td th:text="${p.getId()}"></td>
        <td th:text="${p.getFullName()}"></td>
        <td th:text="${p.getPositionDescription()}"></td>
        <td th:text="${p.getPositionDetailCode()}"></td>
        <td th:text="${p.getAnnuallySalary()}" onkeyup="format(this)"></td>
        <td th:text="${p.getMarketValue()}" onkeyup="format(this)"></td>
        <td><img style="width: 50px; height: 50px;" object-fit="contain" th:src="@{https://flagcdn.com/{code}.svg(code=${p.getCountryCode()})}" th:alt="${p.getCountryName()}"></td>
        <td th:text="${#dates.format(p.getDateOfBirth(), 'dd-MM-yyyy')}" style="width: 120px"></td>
        <td th:text="${p.getSkill()}"></td>
        <td th:text="${p.getClothesNumber()}"></td>
        <td th:if="${p.getIsInjury()}"><img style="width: 30px; height: 30px;" th:src="@{/img/injury.png}"/></td>
        <td th:unless="${p.getIsInjury()}"><img style="width: 30px; height: 30px;" th:src="@{/img/strong.png}"/></td>
        <td th:text="${#dates.format(p.getCreatedAt(), 'dd-MM-yyyy')}"></td>
        <td>
            <img th:if="${p.getAvatar() != null}" th:src="@{${p.getAvatar()}}" alt="no image" style="width: 100px; height: 100px;">
            <img th:unless="${p.getAvatar() != null}" th:src="@{/img/default.jpg}" alt="no image" style="width: 100px; height: 100px;">
        </td>
        <td><a class="btn btn-danger" th:href="@{/player/detail-player(id=${p.getId()})}">Sa thải</a></td>
        <td><a class="btn btn-primary" th:href="@{/player/edit-player(id=${p.getId()})}">Cập nhật</a></td>
    </tr>
</table>
</div>
<div class="alert alert-success" role="alert" th:if="${toastMessage != null}">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <strong>Thành công!</strong> <span th:text="${toastMessage}" th:remove="tag">title</span>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="text-align: center; margin: 0 auto">Ngân sách CLB</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p style="font-weight: bold;">Quỹ lương hiện tại: <span th:style="${budgetSalary.getValue() > 1000 ? 'color: darkgreen' : 'color: red'}" th:text="${budgetSalary.getValue()}"></span></p>
                <p style="font-weight: bold;">Tổng tiền cho chuyển nhượng: <span th:style="${budgetTotalMoney.getValue() > 1000 ? 'color: darkgreen' : 'color: red'}" th:text="${budgetTotalMoney.getValue()}"></span></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Trở về màn hình quản lý</button>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        $('.selectpicker').select2();
    });
</script>
</body>
</html>